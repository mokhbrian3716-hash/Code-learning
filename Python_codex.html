<!doctype html>
<html lang="fa" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Python Codex</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      font-family: 'Vazirmatn', sans-serif;
    }
    .code-block {
      direction: ltr;
      text-align: left;
      font-family: 'Fira Code', 'Courier New', monospace;
    }
    .lesson-card:active {
      transform: scale(0.98);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fadeIn 0.3s ease-out forwards;
    }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.3); }
      50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.6); }
    }
    .completed-glow {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    .progress-bar {
      background: linear-gradient(90deg, #22c55e, #4ade80);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full bg-slate-900 text-white overflow-hidden">
  <div id="app" class="h-full w-full flex flex-col overflow-auto"><!-- Header -->
   <header id="main-header" class="bg-gradient-to-r from-emerald-600 to-teal-600 p-4 shadow-lg flex-shrink-0">
    <div class="flex items-center justify-between">
     <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center"><span class="text-2xl">ğŸ</span>
      </div>
      <div>
       <h1 id="app-title" class="text-xl font-bold">Python Codex</h1>
       <p id="welcome-msg" class="text-xs text-emerald-100">Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ù¾Ø§ÛŒØªÙˆÙ† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!</p>
      </div>
     </div>
     <div id="progress-container" class="text-left"><span id="progress-text" class="text-xs text-emerald-100">Ù¾ÛŒØ´Ø±ÙØª: 0%</span>
      <div class="w-20 h-2 bg-white/20 rounded-full mt-1 overflow-hidden">
       <div id="progress-bar" class="progress-bar h-full rounded-full transition-all duration-500" style="width: 0%"></div>
      </div>
     </div>
    </div>
   </header><!-- Main Content -->
   <main id="main-content" class="flex-1 overflow-auto"><!-- Home View -->
    <div id="home-view" class="p-4 space-y-4"><!-- Stats Cards -->
     <div class="grid grid-cols-3 gap-3">
      <div class="bg-slate-800 rounded-xl p-3 text-center border border-slate-700">
       <div class="text-2xl mb-1">
        ğŸ“š
       </div>
       <div id="total-lessons" class="text-lg font-bold text-emerald-400">
        12
       </div>
       <div class="text-xs text-slate-400">
        Ø¯Ø±Ø³
       </div>
      </div>
      <div class="bg-slate-800 rounded-xl p-3 text-center border border-slate-700">
       <div class="text-2xl mb-1">
        âœ…
       </div>
       <div id="completed-count" class="text-lg font-bold text-emerald-400">
        0
       </div>
       <div class="text-xs text-slate-400">
        ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡
       </div>
      </div>
      <div class="bg-slate-800 rounded-xl p-3 text-center border border-slate-700">
       <div class="text-2xl mb-1">
        ğŸ”¥
       </div>
       <div id="streak-count" class="text-lg font-bold text-orange-400">
        0
       </div>
       <div class="text-xs text-slate-400">
        Ø±ÙˆØ² Ù…ØªÙˆØ§Ù„ÛŒ
       </div>
      </div>
     </div><!-- Lessons List -->
     <div class="space-y-3" id="lessons-container"><!-- Lessons will be rendered here -->
     </div>
    </div><!-- Lesson View -->
    <div id="lesson-view" class="hidden h-full flex flex-col">
     <div class="flex-1 overflow-auto p-4 space-y-4">
      <div id="lesson-header" class="bg-slate-800 rounded-xl p-4 border border-slate-700">
       <div class="flex items-center gap-3 mb-2"><span id="lesson-icon" class="text-3xl">ğŸ“–</span>
        <div>
         <h2 id="lesson-title" class="text-lg font-bold"></h2>
         <p id="lesson-subtitle" class="text-sm text-slate-400"></p>
        </div>
       </div>
      </div>
      <div id="lesson-content" class="space-y-4"><!-- Lesson content will be rendered here -->
      </div>
     </div><!-- Bottom Navigation -->
     <div class="bg-slate-800 border-t border-slate-700 p-4 flex-shrink-0">
      <div class="flex gap-3"><button id="back-btn" class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2"> <span>â†’</span> <span>Ø¨Ø§Ø²Ú¯Ø´Øª</span> </button> <button id="complete-btn" class="flex-1 bg-emerald-600 hover:bg-emerald-500 text-white py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2"> <span>âœ“</span> <span>ØªÚ©Ù…ÛŒÙ„ Ø¯Ø±Ø³</span> </button>
      </div>
     </div>
    </div>
   </main>
  </div>
  <script>
    // Lessons Data
    const lessonsData = [
      {
        id: 'intro',
        icon: 'ğŸ‘‹',
        title: 'Ù…Ø¹Ø±ÙÛŒ Ù¾Ø§ÛŒØªÙˆÙ†',
        subtitle: 'Ø´Ø±ÙˆØ¹ Ø³ÙØ± Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ',
        content: [
          { type: 'text', content: 'Ù¾Ø§ÛŒØªÙˆÙ† ÛŒÚ© Ø²Ø¨Ø§Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ØŒ Ø³Ø§Ø¯Ù‡ Ùˆ Ø®ÙˆØ§Ù†Ø§ Ø§Ø³Øª Ú©Ù‡ Ø¯Ø± Ø³Ø§Ù„ Û±Û¹Û¹Û± ØªÙˆØ³Ø· Ú¯ÛŒØ¯Ùˆ ÙˆÙ† Ø±ÙˆØ³ÙˆÙ… Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯.' },
          { type: 'highlight', content: 'ğŸ¯ Ú†Ø±Ø§ Ù¾Ø§ÛŒØªÙˆÙ†ØŸ Ø³Ø§Ø¯Ú¯ÛŒØŒ Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ Ø¨Ø§Ù„Ø§ØŒ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±Ø§ÙˆØ§Ù†' },
          { type: 'code', content: '# Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù¾Ø§ÛŒØªÙˆÙ†\nprint("Ø³Ù„Ø§Ù… Ø¯Ù†ÛŒØ§!")' },
          { type: 'tip', content: 'Ù¾Ø§ÛŒØªÙˆÙ† Ø¯Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒØŒ Ø¹Ù„Ù… Ø¯Ø§Ø¯Ù‡ØŒ ÙˆØ¨ Ùˆ Ø§ØªÙˆÙ…Ø§Ø³ÛŒÙˆÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.' }
        ]
      },
      {
        id: 'variables',
        icon: 'ğŸ“¦',
        title: 'Ù…ØªØºÛŒØ±Ù‡Ø§',
        subtitle: 'Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§',
        content: [
          { type: 'text', content: 'Ù…ØªØºÛŒØ±Ù‡Ø§ Ù…Ø«Ù„ Ø¬Ø¹Ø¨Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± Ø¢Ù†â€ŒÙ‡Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….' },
          { type: 'code', content: '# ØªØ¹Ø±ÛŒÙ Ù…ØªØºÛŒØ±\nname = "Ø¹Ù„ÛŒ"\nage = 25\nheight = 1.75\nis_student = True' },
          { type: 'highlight', content: 'ğŸ“ Ù‚ÙˆØ§Ù†ÛŒÙ† Ù†Ø§Ù…â€ŒÚ¯Ø°Ø§Ø±ÛŒ: Ø¨Ø§ Ø­Ø±Ù ÛŒØ§ _ Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯ØŒ Ø¨Ø¯ÙˆÙ† ÙØ§ØµÙ„Ù‡' },
          { type: 'code', content: '# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…ØªØºÛŒØ±\nprint(name)\nprint(f"Ø³Ù†: {age}")' }
        ]
      },
      {
        id: 'datatypes',
        icon: 'ğŸ·ï¸',
        title: 'Ø§Ù†ÙˆØ§Ø¹ Ø¯Ø§Ø¯Ù‡',
        subtitle: 'int, float, str, bool',
        content: [
          { type: 'text', content: 'Ù¾Ø§ÛŒØªÙˆÙ† Ú†Ù‡Ø§Ø± Ù†ÙˆØ¹ Ø¯Ø§Ø¯Ù‡ Ø§ØµÙ„ÛŒ Ø¯Ø§Ø±Ø¯:' },
          { type: 'code', content: '# Ø§Ù†ÙˆØ§Ø¹ Ø¯Ø§Ø¯Ù‡\nint_num = 10      # Ø¹Ø¯Ø¯ ØµØ­ÛŒØ­\nfloat_num = 3.14  # Ø¹Ø¯Ø¯ Ø§Ø¹Ø´Ø§Ø±ÛŒ\ntext = "Ø³Ù„Ø§Ù…"     # Ø±Ø´ØªÙ‡\nis_true = True    # Ø¨ÙˆÙ„ÛŒÙ†' },
          { type: 'highlight', content: 'ğŸ” Ø¨Ø§ type() Ù†ÙˆØ¹ Ø¯Ø§Ø¯Ù‡ Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯' },
          { type: 'code', content: 'print(type(10))      # <class \'int\'>\nprint(type("Ø³Ù„Ø§Ù…"))  # <class \'str\'>' }
        ]
      },
      {
        id: 'operators',
        icon: 'â•',
        title: 'Ø¹Ù…Ù„Ú¯Ø±Ù‡Ø§',
        subtitle: 'Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ùˆ Ù…Ù‚Ø§ÛŒØ³Ù‡',
        content: [
          { type: 'text', content: 'Ø¹Ù…Ù„Ú¯Ø±Ù‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ùˆ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.' },
          { type: 'code', content: '# Ø¹Ù…Ù„Ú¯Ø±Ù‡Ø§ÛŒ Ø±ÛŒØ§Ø¶ÛŒ\na = 10 + 5   # Ø¬Ù…Ø¹: 15\nb = 10 - 3   # ØªÙØ±ÛŒÙ‚: 7\nc = 4 * 3    # Ø¶Ø±Ø¨: 12\nd = 15 / 3   # ØªÙ‚Ø³ÛŒÙ…: 5.0\ne = 17 % 5   # Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡: 2\nf = 2 ** 3   # ØªÙˆØ§Ù†: 8' },
          { type: 'code', content: '# Ø¹Ù…Ù„Ú¯Ø±Ù‡Ø§ÛŒ Ù…Ù‚Ø§ÛŒØ³Ù‡\nprint(5 > 3)   # True\nprint(5 == 5)  # True\nprint(5 != 3)  # True' }
        ]
      },
      {
        id: 'strings',
        icon: 'ğŸ“',
        title: 'Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§',
        subtitle: 'Ú©Ø§Ø± Ø¨Ø§ Ù…ØªÙ†',
        content: [
          { type: 'text', content: 'Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ØªÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.' },
          { type: 'code', content: '# Ø³Ø§Ø®Øª Ø±Ø´ØªÙ‡\ntext1 = "Ø³Ù„Ø§Ù…"\ntext2 = \'Ø¯Ù†ÛŒØ§\'\ntext3 = """Ù…ØªÙ†\nÚ†Ù†Ø¯ Ø®Ø·ÛŒ"""' },
          { type: 'code', content: '# Ø¹Ù…Ù„ÛŒØ§Øª Ø±ÙˆÛŒ Ø±Ø´ØªÙ‡\nname = "Python"\nprint(len(name))        # 6\nprint(name.upper())      # PYTHON\nprint(name.lower())      # python\nprint(name[0])           # P' },
          { type: 'highlight', content: 'ğŸ”— Ú†Ø³Ø¨Ø§Ù†Ø¯Ù† Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§: "Ø³Ù„Ø§Ù…" + " " + "Ø¯Ù†ÛŒØ§"' }
        ]
      },
      {
        id: 'lists',
        icon: 'ğŸ“‹',
        title: 'Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§',
        subtitle: 'Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒØ§ÛŒ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§',
        content: [
          { type: 'text', content: 'Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ú†Ù†Ø¯ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø± ÛŒÚ© Ù…ØªØºÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.' },
          { type: 'code', content: '# Ø³Ø§Ø®Øª Ù„ÛŒØ³Øª\nfruits = ["Ø³ÛŒØ¨", "Ù…ÙˆØ²", "Ù¾Ø±ØªÙ‚Ø§Ù„"]\nnumbers = [1, 2, 3, 4, 5]\nmixed = [1, "Ø³Ù„Ø§Ù…", True]' },
          { type: 'code', content: '# Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¹Ù†Ø§ØµØ±\nprint(fruits[0])   # Ø³ÛŒØ¨\nprint(fruits[-1])  # Ù¾Ø±ØªÙ‚Ø§Ù„\n\n# ØªØºÛŒÛŒØ± Ø¹Ù†ØµØ±\nfruits[0] = "Ø§Ù†Ú¯ÙˆØ±"' },
          { type: 'code', content: '# Ù…ØªØ¯Ù‡Ø§ÛŒ Ù„ÛŒØ³Øª\nfruits.append("Ú©ÛŒÙˆÛŒ")  # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù†\nfruits.remove("Ù…ÙˆØ²")   # Ø­Ø°Ù Ú©Ø±Ø¯Ù†\nprint(len(fruits))     # Ø·ÙˆÙ„ Ù„ÛŒØ³Øª' }
        ]
      },
      {
        id: 'conditions',
        icon: 'ğŸ”€',
        title: 'Ø´Ø±Ø·â€ŒÙ‡Ø§',
        subtitle: 'if, elif, else',
        content: [
          { type: 'text', content: 'Ø¨Ø§ Ø´Ø±Ø·â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ù†ÛŒÙ… Ú©Ù‡ Ú©Ø¯Ø§Ù… Ú©Ø¯ Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯.' },
          { type: 'code', content: '# Ø´Ø±Ø· Ø³Ø§Ø¯Ù‡\nage = 18\nif age >= 18:\n    print("Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„")\nelse:\n    print("Ù†ÙˆØ¬ÙˆØ§Ù†")' },
          { type: 'code', content: '# Ú†Ù†Ø¯ Ø´Ø±Ø·\nscore = 85\nif score >= 90:\n    print("Ø¹Ø§Ù„ÛŒ")\nelif score >= 70:\n    print("Ø®ÙˆØ¨")\nelse:\n    print("Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ„Ø§Ø´")' },
          { type: 'highlight', content: 'âš ï¸ Ø¯Ù‚Øª Ú©Ù†ÛŒØ¯: ØªÙˆØ±ÙØªÚ¯ÛŒ (Û´ ÙØ§ØµÙ„Ù‡) Ø¯Ø± Ù¾Ø§ÛŒØªÙˆÙ† Ù…Ù‡Ù… Ø§Ø³Øª!' }
        ]
      },
      {
        id: 'loops',
        icon: 'ğŸ”„',
        title: 'Ø­Ù„Ù‚Ù‡â€ŒÙ‡Ø§',
        subtitle: 'for Ùˆ while',
        content: [
          { type: 'text', content: 'Ø­Ù„Ù‚Ù‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ ØªÚ©Ø±Ø§Ø± ÛŒÚ© Ú©Ø§Ø± Ú†Ù†Ø¯ÛŒÙ† Ø¨Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.' },
          { type: 'code', content: '# Ø­Ù„Ù‚Ù‡ for\nfor i in range(5):\n    print(i)  # 0 ØªØ§ 4\n\n# Ø±ÙˆÛŒ Ù„ÛŒØ³Øª\nfruits = ["Ø³ÛŒØ¨", "Ù…ÙˆØ²"]\nfor fruit in fruits:\n    print(fruit)' },
          { type: 'code', content: '# Ø­Ù„Ù‚Ù‡ while\ncount = 0\nwhile count < 5:\n    print(count)\n    count += 1' },
          { type: 'tip', content: 'Ø§Ø² break Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ Ùˆ continue Ø¨Ø±Ø§ÛŒ Ø±Ø¯ Ø´Ø¯Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.' }
        ]
      },
      {
        id: 'functions',
        icon: 'âš¡',
        title: 'ØªÙˆØ§Ø¨Ø¹',
        subtitle: 'Ø³Ø§Ø®Øª Ú©Ø¯ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø¬Ø¯Ø¯',
        content: [
          { type: 'text', content: 'ØªÙˆØ§Ø¨Ø¹ Ø¨Ù„ÙˆÚ©â€ŒÙ‡Ø§ÛŒ Ú©Ø¯ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ú†Ù†Ø¯ÛŒÙ† Ø¨Ø§Ø± ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ú©Ø±Ø¯.' },
          { type: 'code', content: '# ØªØ¹Ø±ÛŒÙ ØªØ§Ø¨Ø¹\ndef greet(name):\n    return f"Ø³Ù„Ø§Ù… {name}!"\n\n# ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ ØªØ§Ø¨Ø¹\nmessage = greet("Ø¹Ù„ÛŒ")\nprint(message)  # Ø³Ù„Ø§Ù… Ø¹Ù„ÛŒ!' },
          { type: 'code', content: '# ØªØ§Ø¨Ø¹ Ø¨Ø§ Ù¾Ø§Ø±Ø§Ù…ØªØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶\ndef power(base, exp=2):\n    return base ** exp\n\nprint(power(3))     # 9\nprint(power(2, 3))  # 8' },
          { type: 'highlight', content: 'ğŸ’¡ ØªÙˆØ§Ø¨Ø¹ Ú©Ø¯ Ø±Ø§ ØªÙ…ÛŒØ²ØªØ± Ùˆ Ù‚Ø§Ø¨Ù„ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒâ€ŒØªØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.' }
        ]
      },
      {
        id: 'dictionaries',
        icon: 'ğŸ—‚ï¸',
        title: 'Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒâ€ŒÙ‡Ø§',
        subtitle: 'Ú©Ù„ÛŒØ¯ Ùˆ Ù…Ù‚Ø¯Ø§Ø±',
        content: [
          { type: 'text', content: 'Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒâ€ŒÙ‡Ø§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¬ÙØª Ú©Ù„ÛŒØ¯-Ù…Ù‚Ø¯Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.' },
          { type: 'code', content: '# Ø³Ø§Ø®Øª Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ\nperson = {\n    "name": "Ø¹Ù„ÛŒ",\n    "age": 25,\n    "city": "ØªÙ‡Ø±Ø§Ù†"\n}' },
          { type: 'code', content: '# Ø¯Ø³ØªØ±Ø³ÛŒ Ùˆ ØªØºÛŒÛŒØ±\nprint(person["name"])  # Ø¹Ù„ÛŒ\nperson["age"] = 26     # ØªØºÛŒÛŒØ±\nperson["job"] = "Ù…Ù‡Ù†Ø¯Ø³"  # Ø§Ø¶Ø§ÙÙ‡' },
          { type: 'code', content: '# Ù¾ÛŒÙ…Ø§ÛŒØ´ Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ\nfor key, value in person.items():\n    print(f"{key}: {value}")' }
        ]
      },
      {
        id: 'input',
        icon: 'âŒ¨ï¸',
        title: 'ÙˆØ±ÙˆØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø±',
        subtitle: 'Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø§Ø² Ú©Ø§Ø±Ø¨Ø±',
        content: [
          { type: 'text', content: 'Ø¨Ø§ input() Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ø§Ø² Ú©Ø§Ø±Ø¨Ø± ÙˆØ±ÙˆØ¯ÛŒ Ø¨Ú¯ÛŒØ±ÛŒÙ….' },
          { type: 'code', content: '# Ø¯Ø±ÛŒØ§ÙØª ÙˆØ±ÙˆØ¯ÛŒ\nname = input("Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯: ")\nprint(f"Ø³Ù„Ø§Ù… {name}!")' },
          { type: 'code', content: '# ØªØ¨Ø¯ÛŒÙ„ Ù†ÙˆØ¹ Ø¯Ø§Ø¯Ù‡\nage = int(input("Ø³Ù†: "))\nheight = float(input("Ù‚Ø¯: "))' },
          { type: 'highlight', content: 'âš ï¸ input() Ù‡Ù…ÛŒØ´Ù‡ Ø±Ø´ØªÙ‡ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯. Ø¨Ø±Ø§ÛŒ Ø¹Ø¯Ø¯ Ø§Ø² int() ÛŒØ§ float() Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.' },
          { type: 'code', content: '# Ù…Ø«Ø§Ù„ Ú©Ø§Ù…Ù„\nnum1 = int(input("Ø¹Ø¯Ø¯ Ø§ÙˆÙ„: "))\nnum2 = int(input("Ø¹Ø¯Ø¯ Ø¯ÙˆÙ…: "))\nprint(f"Ù…Ø¬Ù…ÙˆØ¹: {num1 + num2}")' }
        ]
      },
      {
        id: 'errors',
        icon: 'ğŸ›¡ï¸',
        title: 'Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§',
        subtitle: 'try Ùˆ except',
        content: [
          { type: 'text', content: 'Ø¨Ø§ try/except Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ø®Ø·Ø§Ù‡Ø§ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒÙ… ØªØ§ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ØªÙˆÙ‚Ù Ù†Ø´ÙˆØ¯.' },
          { type: 'code', content: '# Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§\ntry:\n    num = int(input("Ø¹Ø¯Ø¯: "))\n    result = 10 / num\n    print(result)\nexcept ValueError:\n    print("Ù„Ø·ÙØ§ Ø¹Ø¯Ø¯ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯")\nexcept ZeroDivisionError:\n    print("ØªÙ‚Ø³ÛŒÙ… Ø¨Ø± ØµÙØ±!")' },
          { type: 'code', content: '# finally Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯\ntry:\n    file = open("data.txt")\nexcept FileNotFoundError:\n    print("ÙØ§ÛŒÙ„ ÛŒØ§ÙØª Ù†Ø´Ø¯")\nfinally:\n    print("Ù¾Ø§ÛŒØ§Ù† Ø¹Ù…Ù„ÛŒØ§Øª")' },
          { type: 'tip', content: 'Ù‡Ù…ÛŒØ´Ù‡ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ Ø±Ø§ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯.' }
        ]
      }
    ];

    // Config and State
    const defaultConfig = {
      app_title: 'Python Codex',
      welcome_message: 'Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ù¾Ø§ÛŒØªÙˆÙ† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!',
      background_color: '#0f172a',
      header_color: '#059669',
      text_color: '#f1f5f9',
      accent_color: '#22c55e',
      card_color: '#1e293b'
    };

    let config = { ...defaultConfig };
    let completedLessons = [];
    let currentLessonId = null;
    let isLoading = false;

    // Data Handler
    const dataHandler = {
      onDataChanged(data) {
        completedLessons = data;
        updateUI();
      }
    };

    // Render Functions
    function renderLessons() {
      const container = document.getElementById('lessons-container');
      container.innerHTML = '';

      lessonsData.forEach((lesson, index) => {
        const isCompleted = completedLessons.some(c => c.lesson_id === lesson.id);
        const card = document.createElement('div');
        card.className = `lesson-card bg-slate-800 rounded-xl p-4 border transition-all cursor-pointer animate-fade-in ${isCompleted ? 'border-emerald-500 completed-glow' : 'border-slate-700 hover:border-slate-600'}`;
        card.style.animationDelay = `${index * 50}ms`;
        card.innerHTML = `
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 rounded-xl flex items-center justify-center text-2xl ${isCompleted ? 'bg-emerald-500/20' : 'bg-slate-700'}">
              ${isCompleted ? 'âœ…' : lesson.icon}
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-base">${lesson.title}</h3>
              <p class="text-sm text-slate-400">${lesson.subtitle}</p>
            </div>
            <div class="text-slate-500">
              <svg class="w-5 h-5 rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
          </div>
        `;
        card.onclick = () => openLesson(lesson.id);
        container.appendChild(card);
      });
    }

    function renderLessonContent(lesson) {
      document.getElementById('lesson-icon').textContent = lesson.icon;
      document.getElementById('lesson-title').textContent = lesson.title;
      document.getElementById('lesson-subtitle').textContent = lesson.subtitle;

      const contentContainer = document.getElementById('lesson-content');
      contentContainer.innerHTML = '';

      lesson.content.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'animate-fade-in';
        div.style.animationDelay = `${index * 100}ms`;

        switch (item.type) {
          case 'text':
            div.className += ' bg-slate-800 rounded-xl p-4 border border-slate-700';
            div.innerHTML = `<p class="text-slate-300 leading-relaxed">${item.content}</p>`;
            break;
          case 'code':
            div.className += ' bg-slate-950 rounded-xl p-4 border border-slate-700 overflow-x-auto';
            div.innerHTML = `<pre class="code-block text-sm text-emerald-400 whitespace-pre-wrap">${escapeHtml(item.content)}</pre>`;
            break;
          case 'highlight':
            div.className += ' bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4';
            div.innerHTML = `<p class="text-emerald-300 font-medium">${item.content}</p>`;
            break;
          case 'tip':
            div.className += ' bg-amber-500/10 border border-amber-500/30 rounded-xl p-4';
            div.innerHTML = `<p class="text-amber-300"><span class="font-bold">ğŸ’¡ Ù†Ú©ØªÙ‡:</span> ${item.content}</p>`;
            break;
        }

        contentContainer.appendChild(div);
      });

      // Update complete button state
      const isCompleted = completedLessons.some(c => c.lesson_id === lesson.id);
      const completeBtn = document.getElementById('complete-btn');
      if (isCompleted) {
        completeBtn.innerHTML = '<span>âœ“</span><span>ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</span>';
        completeBtn.className = 'flex-1 bg-slate-600 text-slate-300 py-3 px-4 rounded-xl font-medium cursor-not-allowed flex items-center justify-center gap-2';
        completeBtn.disabled = true;
      } else {
        completeBtn.innerHTML = '<span>âœ“</span><span>ØªÚ©Ù…ÛŒÙ„ Ø¯Ø±Ø³</span>';
        completeBtn.className = 'flex-1 bg-emerald-600 hover:bg-emerald-500 text-white py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2';
        completeBtn.disabled = false;
      }
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function updateUI() {
      renderLessons();
      updateProgress();
      
      // Update current lesson view if open
      if (currentLessonId) {
        const lesson = lessonsData.find(l => l.id === currentLessonId);
        if (lesson) {
          renderLessonContent(lesson);
        }
      }
    }

    function updateProgress() {
      const total = lessonsData.length;
      const completed = completedLessons.length;
      const percentage = Math.round((completed / total) * 100);

      document.getElementById('progress-text').textContent = `Ù¾ÛŒØ´Ø±ÙØª: ${percentage}%`;
      document.getElementById('progress-bar').style.width = `${percentage}%`;
      document.getElementById('completed-count').textContent = completed;
      document.getElementById('total-lessons').textContent = total;

      // Calculate streak (simplified - counts consecutive days with completions)
      const streak = calculateStreak();
      document.getElementById('streak-count').textContent = streak;
    }

    function calculateStreak() {
      if (completedLessons.length === 0) return 0;
      
      const dates = completedLessons
        .filter(c => c.completed_at)
        .map(c => new Date(c.completed_at).toDateString())
        .filter((date, i, arr) => arr.indexOf(date) === i)
        .sort((a, b) => new Date(b) - new Date(a));

      if (dates.length === 0) return 0;

      let streak = 1;
      const today = new Date().toDateString();
      const yesterday = new Date(Date.now() - 86400000).toDateString();

      if (dates[0] !== today && dates[0] !== yesterday) return 0;

      for (let i = 1; i < dates.length; i++) {
        const prevDate = new Date(dates[i - 1]);
        const currDate = new Date(dates[i]);
        const diff = (prevDate - currDate) / 86400000;
        
        if (diff === 1) {
          streak++;
        } else {
          break;
        }
      }

      return streak;
    }

    // Navigation
    function openLesson(lessonId) {
      currentLessonId = lessonId;
      const lesson = lessonsData.find(l => l.id === lessonId);
      if (!lesson) return;

      document.getElementById('home-view').classList.add('hidden');
      document.getElementById('lesson-view').classList.remove('hidden');
      document.getElementById('lesson-view').classList.add('flex');

      renderLessonContent(lesson);
    }

    function goBack() {
      currentLessonId = null;
      document.getElementById('lesson-view').classList.add('hidden');
      document.getElementById('lesson-view').classList.remove('flex');
      document.getElementById('home-view').classList.remove('hidden');
    }

    async function completeLesson() {
      if (!currentLessonId || isLoading) return;
      
      const alreadyCompleted = completedLessons.some(c => c.lesson_id === currentLessonId);
      if (alreadyCompleted) return;

      if (completedLessons.length >= 999) {
        showToast('Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø¯Ø§Ø¯ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ Ù¾Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª!', 'error');
        return;
      }

      isLoading = true;
      const completeBtn = document.getElementById('complete-btn');
      completeBtn.innerHTML = '<span class="animate-spin">â³</span><span>Ø¯Ø± Ø­Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡...</span>';
      completeBtn.disabled = true;

      const result = await window.dataSdk.create({
        lesson_id: currentLessonId,
        completed: true,
        completed_at: new Date().toISOString()
      });

      isLoading = false;

      if (result.isOk) {
        showToast('Ø¢ÙØ±ÛŒÙ†! Ø¯Ø±Ø³ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯ ğŸ‰', 'success');
      } else {
        showToast('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ', 'error');
        completeBtn.innerHTML = '<span>âœ“</span><span>ØªÚ©Ù…ÛŒÙ„ Ø¯Ø±Ø³</span>';
        completeBtn.disabled = false;
      }
    }

    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `fixed bottom-20 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-xl shadow-lg z-50 animate-fade-in ${type === 'success' ? 'bg-emerald-600' : 'bg-red-600'} text-white font-medium`;
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.3s';
        setTimeout(() => toast.remove(), 300);
      }, 2000);
    }

    // Config Change Handler
    async function onConfigChange(newConfig) {
      config = { ...config, ...newConfig };
      
      // Update header
      document.getElementById('app-title').textContent = config.app_title || defaultConfig.app_title;
      document.getElementById('welcome-msg').textContent = config.welcome_message || defaultConfig.welcome_message;
      
      // Update colors
      document.body.style.backgroundColor = config.background_color || defaultConfig.background_color;
      document.getElementById('main-header').style.background = `linear-gradient(to right, ${config.header_color || defaultConfig.header_color}, ${config.header_color || defaultConfig.header_color}dd)`;
    }

    // Element SDK Setup
    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (v) => { config.background_color = v; window.elementSdk.setConfig({ background_color: v }); }
          },
          {
            get: () => config.card_color || defaultConfig.card_color,
            set: (v) => { config.card_color = v; window.elementSdk.setConfig({ card_color: v }); }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (v) => { config.text_color = v; window.elementSdk.setConfig({ text_color: v }); }
          },
          {
            get: () => config.header_color || defaultConfig.header_color,
            set: (v) => { config.header_color = v; window.elementSdk.setConfig({ header_color: v }); }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (v) => { config.accent_color = v; window.elementSdk.setConfig({ accent_color: v }); }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || 'Vazirmatn',
          set: (v) => { config.font_family = v; window.elementSdk.setConfig({ font_family: v }); }
        },
        fontSizeable: {
          get: () => config.font_size || 16,
          set: (v) => { config.font_size = v; window.elementSdk.setConfig({ font_size: v }); }
        }
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['app_title', config.app_title || defaultConfig.app_title],
        ['welcome_message', config.welcome_message || defaultConfig.welcome_message]
      ]);
    }

    // Initialize
    async function init() {
      // Initialize Element SDK
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
        config = { ...defaultConfig, ...window.elementSdk.config };
      }

      // Initialize Data SDK
      if (window.dataSdk) {
        const result = await window.dataSdk.init(dataHandler);
        if (!result.isOk) {
          console.error('Failed to initialize data SDK');
        }
      }

      // Event Listeners
      document.getElementById('back-btn').addEventListener('click', goBack);
      document.getElementById('complete-btn').addEventListener('click', completeLesson);

      // Initial render
      renderLessons();
      updateProgress();
      onConfigChange(config);
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c9c6d2022daa63e',t:'MTc3MDM5OTU1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>